{"id":"K94L","dependencies":[{"name":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\package.json","includedInParent":true,"mtime":1742042086953},{"name":"./constants","loc":{"line":1,"column":26,"index":26},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\ui.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\constants.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.createInfoBox=v,exports.debounce=z,exports.default=void 0,exports.initializeDatePickers=u,exports.initializeExportButton=x,exports.initializeFilterBox=s,exports.initializeFilterCheckboxes=p,exports.initializeHelpButton=b,exports.initializeInfoIcons=y,exports.initializeResetButton=h,exports.initializeSearchInput=f,exports.initializeSelect2Filter=d,exports.initializeShareButtons=g,exports.initializeViewToggle=c,exports.initializeWelcomeOverlay=w,exports.updateResetButtonVisibility=m;var e=require(\"./constants\");function t(e,t){return r(e)||a(e,t)||i(e,t)||n()}function n(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function i(e,t){if(e){if(\"string\"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=n){var i,o,a,r,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw o}}return l}}function r(e){if(Array.isArray(e))return e}var l=null;function c(){var e=document.querySelectorAll(\".switch-button\"),t=document.getElementById(\"map-overview-btn\"),n=document.getElementById(\"dashboard-btn\"),i=document.getElementById(\"cases-btn\"),o=document.getElementById(\"map\"),a=document.getElementById(\"dashboard\"),r=document.getElementById(\"mask\");function l(){t.classList.contains(\"active\")?(o.style.display=\"block\",a.style.display=\"none\",r.style.display=\"none\",window.map&&setTimeout(function(){window.map.invalidateSize(),\"function\"==typeof window.updateMapView&&window.updateMapView()},100)):i.classList.contains(\"active\")?(o.style.display=\"none\",a.style.display=\"none\",r.style.display=\"block\"):n.classList.contains(\"active\")&&(o.style.display=\"none\",a.style.display=\"block\",r.style.display=\"none\",\"function\"==typeof window.handleDashboardResize&&setTimeout(window.handleDashboardResize,100),\"function\"==typeof window.forceUpdateDashboard&&setTimeout(window.forceUpdateDashboard,200))}e.forEach(function(t){t.addEventListener(\"click\",function(){e.forEach(function(e){return e.classList.remove(\"active\")}),t.classList.add(\"active\"),l(),\"dashboard-btn\"===t.id&&(\"function\"==typeof window.handleDashboardResize&&setTimeout(window.handleDashboardResize,200),\"function\"==typeof window.forceUpdateDashboard&&setTimeout(window.forceUpdateDashboard,300)),\"map-overview-btn\"===t.id&&setTimeout(function(){\"function\"==typeof window.updateMapView?window.updateMapView():\"function\"==typeof window.updateVisibleData&&window.updateVisibleData()},200)})}),l()}function s(){document.querySelector(\"#clicker\").addEventListener(\"click\",function(){var e=document.querySelector(\".filter-content\"),t=document.querySelector(\".expand-icon\");e.classList.toggle(\"expanded\"),t.classList.toggle(\"expanded\")})}function d(e,t,n,i){$(e).select2({data:t.map(function(e){return{id:e,text:e}}),placeholder:n}).on(\"change\",i)}function u(e,t){$(\"#startDate, #endDate\").datepicker({format:\"dd/mm/yy\",autoclose:!0}).on(\"changeDate\",e),$(\"#startDate\").datepicker(\"setDate\",\"01/01/2022\"),$(\"#endDate\").datepicker(\"setDate\",t.maxDate)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;$(\"#search-input\").on(\"input\",z(e,t))}function p(e){Object.entries(e).forEach(function(e){var n=t(e,2),i=n[0],o=n[1],a=document.getElementById(i);a&&a.addEventListener(\"change\",o)})}function h(e){$(\"#resetFilters\").on(\"click\",e)}function m(e){e?$(\"#resetFilters\").show():$(\"#resetFilters\").hide()}function v(e,t){console.log(\"Creating info box for:\",e),l&&l.remove();var n=document.createElement(\"div\");n.className=\"info-box\",n.textContent=e,document.body.appendChild(n);var i=t.getBoundingClientRect();n.style.top=\"\".concat(i.bottom+window.scrollY+5,\"px\"),n.style.left=\"\".concat(i.left+window.scrollX-150,\"px\"),n.style.display=\"block\",l=n,console.log(\"Info box created and displayed\")}function y(){function t(t){console.log(\"Info icon clicked:\",this.id),t.preventDefault(),t.stopPropagation();var n=this.getAttribute(\"data-filter\");v(e.infoBoxes[n],this)}[\"main-info\",\"country-info\",\"corruption-info\",\"health-info\",\"date-info\",\"archived-info\",\"case-info\",\"unreliable-info\",\"country-level-info\"].forEach(function(e){var n=document.getElementById(e);n?(console.log(\"Attaching click event to:\",e),n.addEventListener(\"click\",t),n.addEventListener(\"mousedown\",function(e){return e.preventDefault()})):console.warn(\"Info icon not found:\",e)}),document.addEventListener(\"click\",function(e){l&&!e.target.classList.contains(\"info-icon\")&&(console.log(\"Closing info box\"),l.remove(),l=null)})}function w(){var e=document.getElementById(\"infoCardOverlay\");sessionStorage.getItem(\"hasVisitedBefore\")||setTimeout(function(){e.classList.add(\"show\")},100),document.getElementById(\"closeInfoCard\").addEventListener(\"click\",function(){e.classList.remove(\"show\"),sessionStorage.setItem(\"hasVisitedBefore\",\"true\")}),$(\"#infoCardOverlay\").on(\"click\",function(e){e.target===this&&$(this).removeClass(\"show\")})}function b(){$(\"<button>\").addClass(\"btn btn-sm btn-outline-secondary export-csv-button btn-sharer\").html('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 512 512\"><path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z\"/></svg>').attr(\"title\",\"Open the Quick start menu\").appendTo(\"#help-button-container\").css({\"min-height\":\"34px\",display:\"flex\",\"align-items\":\"center\",\"justify-content\":\"center\"}).on(\"click\",function(){$(\"#infoCardOverlay\").addClass(\"show\")})}function g(){var e=document.getElementById(\"twitter_share\");e&&e.addEventListener(\"click\",function(){var e=window.location.href.split(\"?\")[0],t=\"https://twitter.com/intent/tweet?text=\"+encodeURIComponent(\"Explore global health sector integrity issues and scandals: \"+e);window.open(t,\"_blank\")});var t=document.getElementById(\"lin_share\");t&&t.addEventListener(\"click\",function(){window.location.href.split(\"?\")[0];var e=\"https://www.facebook.com/sharer/sharer.php?u=\"+encodeURIComponent(\"https://ti-health.org/\");window.open(e,\"_blank\",\"toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250,top=300,left=300\")})}function x(e){$(\"<button>\").addClass(\"btn btn-sm btn-outline-secondary export-csv-button btn-sharer\").html('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-box-arrow-down\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1z\"/><path fill-rule=\"evenodd\" d=\"M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708z\"/></svg>').attr(\"title\",\"Export filtered data to CSV\").appendTo(\"#export-button-container\").on(\"click\",function(){var t=e(),n=[];n.push([\"Title\",\"Country/Region\",\"URL\",\"Date\"].join(\",\")),t.forEach(function(e){var t=['\"'+(e.Title||\"\").replace(/\"/g,'\"\"')+'\"','\"'+(e.country||\"\").replace(/\"/g,'\"\"')+'\"','\"'+(e.url||\"\").replace(/\"/g,'\"\"')+'\"','\"'+(e.Date||\"\").replace(/\"/g,'\"\"')+'\"'];n.push(t.join(\",\"))});var i=n.join(\"\\n\"),o=new Blob([i],{type:\"text/csv;charset=utf-8;\"}),a=document.createElement(\"a\");if(void 0!==a.download){var r=URL.createObjectURL(o);a.setAttribute(\"href\",r),a.setAttribute(\"download\",\"export.csv\"),a.style.visibility=\"hidden\",document.body.appendChild(a),a.click(),document.body.removeChild(a)}})}function z(e,t){var n;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout(function(){clearTimeout(n),e.apply(void 0,o)},t)}}var B=exports.default={initializeViewToggle:c,initializeFilterBox:s,initializeSelect2Filter:d,initializeDatePickers:u,initializeSearchInput:f,initializeFilterCheckboxes:p,initializeResetButton:h,updateResetButtonVisibility:m,createInfoBox:v,initializeInfoIcons:y,initializeWelcomeOverlay:w,initializeHelpButton:b,initializeShareButtons:g,initializeExportButton:x,debounce:z};"},"sourceMaps":null,"error":null,"hash":"985fb0b8b57e406f78c3fb3c83f1a94c","cacheData":{"env":{}}}