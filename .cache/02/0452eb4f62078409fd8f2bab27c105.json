{"id":"A2T1","dependencies":[{"name":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\package.json","includedInParent":true,"mtime":1742042086953},{"name":"./modules/map","loc":{"line":1,"column":27,"index":27},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\app.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\map.js"},{"name":"./modules/data","loc":{"line":2,"column":28,"index":72},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\app.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\data.js"},{"name":"./modules/ui","loc":{"line":3,"column":26,"index":116},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\app.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\ui.js"},{"name":"./modules/table","loc":{"line":4,"column":29,"index":161},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\app.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\table.js"},{"name":"./modules/dashboard","loc":{"line":5,"column":33,"index":213},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\app.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\dashboard.js"}],"generated":{"js":"\"use strict\";var e=l(require(\"./modules/map\")),t=l(require(\"./modules/data\")),a=l(require(\"./modules/ui\")),i=l(require(\"./modules/table\")),n=l(require(\"./modules/dashboard\"));function r(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(\"default\"!==l&&{}.hasOwnProperty.call(e,l)){var o=n?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(i,l,o):i[l]=e[l]}return i.default=e,a&&a.set(e,i),i}var o=new Map;function c(e,i){var n=i.archivedFilter,r=i.caseFilter,l=i.unreliableFilter,o=i.countryLevelFilter,c=d3.timeParse(\"%d/%m/%y\"),u=t.processData(e,c);$(\".total-count\").text(t.formatNumber(u.allData.length)),d(u,{archivedFilter:n,caseFilter:r,unreliableFilter:l,countryLevelFilter:o}),a.initializeHelpButton(),a.initializeShareButtons(),a.initializeExportButton(function(){return t.getFilteredData()}),s()}function d(t,i){var n=i.archivedFilter,r=i.caseFilter,l=i.unreliableFilter,o=i.countryLevelFilter,c=t.uniqueCountries,d=t.uniqueCorruptionCategories,m=t.uniqueHealthCategories,p=t.minDate,f=t.maxDate;a.initializeSelect2Filter(\"#countryFilter\",c,\"Select multiple\",u),a.initializeSelect2Filter(\"#corruptionCategoriesFilter\",d,\"Select multiple\",u),a.initializeSelect2Filter(\"#healthCategoriesFilter\",m,\"Select multiple\",u),a.initializeDatePickers(u,{minDate:p,maxDate:f}),a.initializeSearchInput(u),a.initializeFilterCheckboxes({archivedFilter:function(){s(),h()},unreliableFilter:function(){s(),h()},caseFilter:function(){s(),h()},countryLevelFilter:function(){e.toggleLegend(!o.checked),s(),h()}}),a.initializeResetButton(function(){g()&&($(\"#countryFilter, #corruptionCategoriesFilter, #healthCategoriesFilter\").val(null).trigger(\"change\"),$(\"#startDate\").datepicker(\"setDate\",p),$(\"#endDate\").datepicker(\"setDate\",f),$(\"#search-input\").val(\"\"),n.checked=!1,r.checked=!0,l.checked=!0,o.checked=!0,s(),h(),e.toggleLegend(!1))})}function u(){s(),h()}function s(){var e={selectedCountries:new Set($(\"#countryFilter\").val()||[]),selectedCorruptionCategories:new Set($(\"#corruptionCategoriesFilter\").val()||[]),selectedHealthCategories:new Set($(\"#healthCategoriesFilter\").val()||[]),startDate:$(\"#startDate\").datepicker(\"getDate\"),endDate:$(\"#endDate\").datepicker(\"getDate\"),searchTerm:$(\"#search-input\").val().toLowerCase().trim(),showArchived:document.getElementById(\"archivedFilter\").checked,showCase:document.getElementById(\"caseFilter\").checked,unreliableCase:document.getElementById(\"unreliableFilter\").checked,showCountryLevel:document.getElementById(\"countryLevelFilter\").checked},a=t.filterData(e);window.currentFilteredData=a,m()}function g(){var e=t.getDateRange(),a=$(\"#countryFilter\").val()||[],i=$(\"#corruptionCategoriesFilter\").val()||[],n=$(\"#healthCategoriesFilter\").val()||[],r=$(\"#startDate\").datepicker(\"getDate\"),l=$(\"#endDate\").datepicker(\"getDate\"),o=$(\"#search-input\").val().trim(),c=document.getElementById(\"archivedFilter\").checked,d=!document.getElementById(\"unreliableFilter\").checked,u=!document.getElementById(\"caseFilter\").checked,s=!document.getElementById(\"countryLevelFilter\").checked,g=r&&e.minDate&&r.getTime()!==e.minDate.getTime()||l&&e.maxDate&&l.getTime()!==e.maxDate.getTime();return a.length>0||i.length>0||n.length>0||g||\"\"!==o||c||d||u||s}function h(){a.updateResetButtonVisibility(g())}function m(){console.time(\"Updating Map, Table, and Dashboard\"),e.clearMarkers(),o.clear();var a=t.getFilteredData(),i=t.getDateRange();if(n.updateDashboard(a,i),a.length>0){var r=1e3,l=0;!function t(){for(var i=Math.min(l+r,a.length),n=[],c=l;c<i;c++){var d=a[c],u=\"\".concat(d.lat,\"-\").concat(d.long,\"-\").concat(d.Title);if(!o.has(u)){var s=e.createMarker(d);n.push(s),o.set(u,s)}}e.addMarkers(n),(l=i)<a.length?setTimeout(t,0):(e.fitMapToBounds(),p())}()}else p();console.timeEnd(\"Updating Map, Table, and Dashboard\")}document.addEventListener(\"DOMContentLoaded\",function(){console.time(\"Total Initialization\"),console.log(\"Initialization started\"),a.initializeWelcomeOverlay(),a.initializeViewToggle(),a.initializeFilterBox(),a.initializeInfoIcons(),e.initializeMap(),i.initializeDataTable();var r=document.getElementById(\"dashboard\");n.initializeDashboard(r);var l=document.getElementById(\"archivedFilter\"),o=document.getElementById(\"caseFilter\"),d=document.getElementById(\"unreliableFilter\"),u=document.getElementById(\"countryLevelFilter\");console.time(\"Data Fetching\"),t.loadData(\"./data/loc3.json\").then(function(e){console.timeEnd(\"Data Fetching\"),c(e,{archivedFilter:l,caseFilter:o,unreliableFilter:d,countryLevelFilter:u})}).catch(function(e){return console.error(\"Error loading data:\",e)}),console.timeEnd(\"Total Initialization\")});var p=a.debounce(function(){if(!e.isMapMoving()){var a=e.getMapBounds(),r=t.getVisibleData(a);if(window.currentVisibleData=r,i.updateDataTable(r),\"function\"==typeof n.updateDashboard){var l=t.getDateRange();console.log(\"Updating dashboard with \".concat(r.length,\" visible data points\")),n.updateDashboard(r,l)}\"block\"===document.querySelector(\"#dashboard\").style.display&&n.handleDashboardResize(),$(\".filter-count\").text(t.formatNumber(r.length))}},1e3);e.onMoveEnd=p,window.updateVisibleData=p,window.updateMapView=function(){e.onMoveEnd=p,e.isMapMoving()||(e.fitMapToBounds(),p())},window.handleDashboardResize=function(){n.handleDashboardResize()},window.forceUpdateDashboard=function(){var a=e.getMapBounds(),i=t.getVisibleData(a);if(i.length>0){var r=t.getDateRange();n.updateDashboard(i,r),\"function\"==typeof n.forceUpdateCharts&&n.forceUpdateCharts()}};"},"sourceMaps":null,"error":null,"hash":"58a35776bb13c5e49f636c29f64b4422","cacheData":{"env":{}}}