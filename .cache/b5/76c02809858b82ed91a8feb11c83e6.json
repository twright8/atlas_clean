{"id":"iy2O","dependencies":[{"name":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\package.json","includedInParent":true,"mtime":1742042086953},{"name":"d3","loc":{"line":5,"column":20,"index":152},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\dashboardStats.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\node_modules\\d3\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0,exports.updateSummaryStats=p;var n=e(require(\"d3\"));function t(n){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(t=function(n){return n?r:e})(n)}function e(n,e){if(!e&&n&&n.__esModule)return n;if(null===n||\"object\"!=typeof n&&\"function\"!=typeof n)return{default:n};var r=t(e);if(r&&r.has(n))return r.get(n);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(\"default\"!==o&&{}.hasOwnProperty.call(n,o)){var c=i?Object.getOwnPropertyDescriptor(n,o):null;c&&(c.get||c.set)?Object.defineProperty(a,o,c):a[o]=n[o]}return a.default=n,r&&r.set(n,a),a}function r(n,t){return o(n)||i(n,t)||s(n,t)||a()}function a(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function i(n,t){var e=null==n?null:\"undefined\"!=typeof Symbol&&n[Symbol.iterator]||n[\"@@iterator\"];if(null!=e){var r,a,i,o,c=[],l=!0,s=!1;try{if(i=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;l=!1}else for(;!(l=(r=i.call(e)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(n){s=!0,a=n}finally{try{if(!l&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}function o(n){if(Array.isArray(n))return n}function c(n){return d(n)||u(n)||s(n)||l()}function l(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function s(n,t){if(n){if(\"string\"==typeof n)return f(n,t);var e={}.toString.call(n).slice(8,-1);return\"Object\"===e&&n.constructor&&(e=n.constructor.name),\"Map\"===e||\"Set\"===e?Array.from(n):\"Arguments\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(n,t):void 0}}function u(n){if(\"undefined\"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n[\"@@iterator\"])return Array.from(n)}function d(n){if(Array.isArray(n))return f(n)}function f(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function p(t,e){var r=t.length,a=new Set;t.forEach(function(n){n.country&&n.country.trim()&&a.add(n.country)});var i=\"-\",o=\"-\";if(e&&e.minDate&&e.maxDate){var c=n.timeFormat(\"%b %Y\"),l=n.timeFormat(\"%B %Y\");i=\"\".concat(c(e.minDate),\" - \").concat(c(e.maxDate)),o=\"\".concat(l(e.minDate),\" - \").concat(l(e.maxDate))}document.getElementById(\"total-articles\").textContent=r.toLocaleString(),document.getElementById(\"total-countries\").textContent=a.size.toLocaleString(),document.getElementById(\"time-period\").textContent=i;var s=document.getElementById(\"time-period-display\");s&&(s.textContent=o),v(t)}function v(n){var t=document.getElementById(\"key-metrics\");if(t){var e=g(n),r=e>0?Math.round(n.length/e*10)/10:0,a=new Set;n.forEach(function(n){n.country&&n.country.trim()&&a.add(n.country)});var i=Math.round(a.size/195*100),o=h(n),c=0,l=\"N/A\";o.length>0&&(l=o[0].category,c=Math.round(o[0].count/n.length*100));var s='\\n        <div class=\"key-metric\">\\n            <span class=\"key-metric-value\">'.concat(r,'</span>\\n            <span class=\"key-metric-label\">Articles/Month</span>\\n        </div>\\n        <div class=\"key-metric\">\\n            <span class=\"key-metric-value\">').concat(i,'%</span>\\n            <span class=\"key-metric-label\">Country Coverage</span>\\n        </div>\\n        <div class=\"key-metric\">\\n            <span class=\"key-metric-value\">').concat(c,'%</span>\\n            <span class=\"key-metric-label\">').concat(l,'</span>\\n        </div>\\n        <div class=\"key-metric\">\\n            <span class=\"key-metric-value\">').concat(n.length.toLocaleString(),'</span>\\n            <span class=\"key-metric-label\">Total Articles</span>\\n        </div>\\n    ');t.innerHTML=s,m(n)}}function m(n){var t=document.getElementById(\"trend-indicators\");if(t){var e=\"\";if(n.length<10)return e='\\n            <div class=\"trend-indicator\">\\n                <div class=\"trend-title\">\\n                    <i class=\"fa fa-info-circle\"></i>\\n                    <span>Dataset Analysis</span>\\n                </div>\\n                <div class=\"trend-value trend-neutral\">\\n                    <i class=\"fa fa-exclamation-circle\"></i>\\n                    <span>Need more data for detailed trends</span>\\n                </div>\\n            </div>\\n        ',void(t.innerHTML=e);var r=b(n),a=k(n),i=C(n);e='\\n        <div class=\"trend-indicator\">\\n            <div class=\"trend-title\">\\n                <i class=\"fa fa-calendar\"></i>\\n                <span>Time Pattern</span>\\n            </div>\\n            <div class=\"trend-value '.concat(r.direction,'\">\\n                <i class=\"fa fa-').concat(D(r.direction),'\"></i>\\n                <span>').concat(r.label,'</span>\\n            </div>\\n        </div>\\n        <div class=\"trend-indicator\">\\n            <div class=\"trend-title\">\\n                <i class=\"fa fa-globe\"></i>\\n                <span>Geographic Focus</span>\\n            </div>\\n            <div class=\"trend-value\">\\n                <span>').concat(a.label,'</span>\\n            </div>\\n        </div>\\n        <div class=\"trend-indicator\">\\n            <div class=\"trend-title\">\\n                <i class=\"fa fa-tag\"></i>\\n                <span>Rising Issue</span>\\n            </div>\\n            <div class=\"trend-value\">\\n                <span>').concat(i.label,\"</span>\\n            </div>\\n        </div>\\n    \"),t.innerHTML=e,y(n)}}function y(n){var t=document.getElementById(\"recent-articles-list\");if(t)if(0!==n.length){var e=c(n).sort(function(n,t){return n.parsedDate&&t.parsedDate?t.parsedDate-n.parsedDate:0}).slice(0,5).map(function(n){var t=n.Title||\"Untitled\",e=n.country||\"Unknown location\",r=\"Unknown date\";if(n.parsedDate){r=n.parsedDate.toLocaleDateString(void 0,{year:\"numeric\",month:\"short\",day:\"numeric\"})}else n.Date&&(r=n.Date);return Array.isArray(n[\"Corruption Categories\"])&&n[\"Corruption Categories\"].length>0&&(n[\"Corruption Categories\"].slice(0,2).join(\", \"),n[\"Corruption Categories\"].length>2&&\"...\"),'\\n            <div class=\"article-item\" data-url=\"'.concat(n.url||\"#\",'\" onclick=\"window.open(\\'').concat(n.url||\"#\",\"', '_blank')\\\">\\n                <div class=\\\"article-title\\\">\").concat(t,'</div>\\n                <div class=\"article-meta\">\\n                    <span><i class=\"fa fa-map-marker\"></i> ').concat(e,'</span>\\n                    <span><i class=\"fa fa-calendar\"></i> ').concat(r,\"</span>\\n                </div>\\n            </div>\\n        \")}).join(\"\");t.innerHTML=e}else t.innerHTML='<p class=\"no-data-message\">No articles available</p>'}function g(n){if(0===n.length)return 0;var t=n.map(function(n){return n.parsedDate}).filter(function(n){return null!=n});if(0===t.length)return 0;var e=new Date(Math.min.apply(Math,c(t.map(function(n){return n.getTime()})))),r=new Date(Math.max.apply(Math,c(t.map(function(n){return n.getTime()}))));return 12*(r.getFullYear()-e.getFullYear())+(r.getMonth()-e.getMonth())+1}function h(n){var t={};return n.forEach(function(n){Array.isArray(n[\"Corruption Categories\"])&&n[\"Corruption Categories\"].forEach(function(n){n&&n.trim()&&(t[n]=(t[n]||0)+1)})}),Object.entries(t).map(function(n){var t=r(n,2);return{category:t[0],count:t[1]}}).sort(function(n,t){return t.count-n.count})}function b(t){if(t.length<10)return{direction:\"trend-neutral\",label:\"Insufficient data\"};var e=n.nest().key(function(t){var e=t.parsedDate;return e?n.timeFormat(\"%Y-%m\")(e):\"Unknown\"}).rollup(function(n){return n.length}).entries(t).filter(function(n){return\"Unknown\"!==n.key}).sort(function(t,e){return n.ascending(t.key,e.key)});if(e.length<3)return{direction:\"trend-neutral\",label:\"Insufficient time span\"};var r=Math.floor(e.length/3),a=e.slice(0,r),i=e.slice(-r),o=n.mean(a,function(n){return n.value}),c=(n.mean(i,function(n){return n.value})-o)/o*100;return c>20?{direction:\"trend-up\",label:\"Increasing coverage\"}:c<-20?{direction:\"trend-down\",label:\"Decreasing coverage\"}:{direction:\"trend-neutral\",label:\"Stable coverage\"}}function k(n){var t=[],e={};if(n.forEach(function(n){n.country&&n.country.trim()&&(e[n.country]=(e[n.country]||0)+1)}),Object.entries(e).forEach(function(n){var e=r(n,2),a=e[0],i=e[1];t.push({country:a,count:i})}),t.sort(function(n,t){return t.count-n.count}),0===t.length)return{label:\"No geographic data\"};var a=t.slice(0,3).reduce(function(n,t){return n+t.count},0),i=Math.round(a/n.length*100);return i>60?{label:\"High focus on top 3 (\".concat(i,\"%)\")}:i>40?{label:\"Moderate regional focus (\".concat(i,\"%)\")}:{label:\"Broad global coverage\"}}function C(n){if(n.length<10)return{label:\"Insufficient data\"};var t=c(n).sort(function(n,t){return n.parsedDate&&t.parsedDate?n.parsedDate-t.parsedDate:0}),e=Math.floor(t.length/2),r=t.slice(0,e),a=t.slice(e),i={},o={};r.forEach(function(n){Array.isArray(n[\"Corruption Categories\"])&&n[\"Corruption Categories\"].forEach(function(n){n&&n.trim()&&(i[n]=(i[n]||0)+1)})}),a.forEach(function(n){Array.isArray(n[\"Corruption Categories\"])&&n[\"Corruption Categories\"].forEach(function(n){n&&n.trim()&&(o[n]=(o[n]||0)+1)})});var l=-1/0,s=null;return Object.keys(o).forEach(function(n){var t=i[n]||0,e=o[n];if(e>=3){var r=t>0?(e-t)/t:1/0;r>l&&(l=r,s=n)}}),s?{label:s.length>18?s.slice(0,15)+\"...\":s}:{label:\"No clear trend\"}}function D(n){switch(n){case\"trend-up\":return\"arrow-up\";case\"trend-down\":return\"arrow-down\";default:return\"minus\"}}var w=exports.default={updateSummaryStats:p};"},"sourceMaps":null,"error":null,"hash":"817dbf72c42d84ef712281114213c3a4","cacheData":{"env":{}}}