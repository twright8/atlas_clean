{"id":"modules/dashboardCharts.js","dependencies":[{"name":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\package.json","includedInParent":true,"mtime":1742042086953},{"name":"d3","loc":{"line":4,"column":20,"index":123},"parent":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\src\\modules\\dashboardCharts.js","resolved":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\node_modules\\d3\\index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nexports.initializeCategoryChart = initializeCategoryChart;\nexports.initializeTimeSeriesChart = initializeTimeSeriesChart;\nexports.initializeTopCountriesChart = initializeTopCountriesChart;\nexports.updateCategoryChart = updateCategoryChart;\nexports.updateTimeSeriesChart = updateTimeSeriesChart;\nexports.updateTopCountriesChart = updateTopCountriesChart;\nvar d3 = _interopRequireWildcard(require(\"d3\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; } /**\n * Module for enhanced dashboard chart visualizations with animations and interactive features\n */\n// Chart references\nvar timeSeriesChart;\nvar categoryChart;\nvar topCountriesChart;\n\n/**\n * Initialize the time series chart\n * @returns {Object} The chart reference\n */\nfunction initializeTimeSeriesChart() {\n  var container = d3.select('#time-series-chart');\n\n  // Set up dimensions and margins\n  var margin = {\n    top: 20,\n    right: 30,\n    bottom: 60,\n    left: 60\n  };\n  var containerWidth = document.getElementById('time-series-chart').clientWidth || 500;\n  var width = Math.max(containerWidth - margin.left - margin.right, 100);\n  var height = 260 - margin.top - margin.bottom;\n\n  // Create SVG with extra height for labels\n  var svg = container.append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom + 130) // Added 30px for labels\n  .append('g').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n  var x = d3.scaleTime().domain([/* your min date */ /* your max date */,]).range([0, width]);\n\n  // Add X axis placeholder\n  svg.append('g').attr('class', 'x-axis').attr('transform', \"translate(0,\".concat(height, \")\")).call(d3.axisBottom(x));\n\n  // Add the X axis label as a separate element with more space\n\n  // Add Y axis placeholder\n  svg.append('g').attr('class', 'y-axis').append('text').attr('transform', 'rotate(-90)').attr('y', -40).attr('x', -height / 2).attr('fill', '#333').style('text-anchor', 'middle').text('Articles');\n\n  // Add grid lines\n  svg.append('g').attr('class', 'grid-lines').style('stroke-dasharray', '3,3').style('stroke', '#e0e0e0').style('stroke-width', 0.5);\n\n  // Store reference to chart\n  timeSeriesChart = svg;\n  return svg;\n}\n\n/**\n * Initialize the category breakdown chart\n * @returns {Object} The chart reference\n */\nfunction initializeCategoryChart() {\n  var container = d3.select('#category-chart');\n\n  // Set up dimensions and margins\n  var margin = {\n    top: 20,\n    right: 30,\n    bottom: 50,\n    left: 160\n  };\n  var containerWidth = document.getElementById('category-chart').clientWidth || 500;\n  var width = Math.max(containerWidth - margin.left - margin.right, 100);\n  var height = 260 - margin.top - margin.bottom;\n\n  // Create SVG\n  var svg = container.append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n\n  // Add X axis placeholder\n  svg.append('g').attr('class', 'x-axis').attr('transform', \"translate(0,\".concat(height, \")\")).append('text').attr('y', 40).attr('x', width / 2).attr('fill', '#333').style('text-anchor', 'middle');\n\n  // Add Y axis placeholder\n  svg.append('g').attr('class', 'y-axis');\n\n  // Store reference to chart\n  categoryChart = svg;\n  return svg;\n}\n\n/**\n * Initialize the top countries chart\n * @returns {Object} The chart reference\n */\nfunction initializeTopCountriesChart() {\n  var container = d3.select('#top-countries-chart');\n\n  // Set up dimensions and margins\n  var margin = {\n    top: 20,\n    right: 30,\n    bottom: 50,\n    left: 110\n  };\n  var containerWidth = document.getElementById('top-countries-chart').clientWidth || 500;\n  var width = Math.max(containerWidth - margin.left - margin.right, 100);\n  var height = 260 - margin.top - margin.bottom;\n\n  // Create SVG\n  var svg = container.append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\"));\n\n  // Add X axis placeholder\n  svg.append('g').attr('class', 'x-axis').attr('transform', \"translate(0,\".concat(height, \")\")).append('text').attr('y', 40).attr('x', width / 2).attr('fill', '#333').style('text-anchor', 'middle');\n  // Add Y axis placeholder\n  svg.append('g').attr('class', 'y-axis');\n\n  // Store reference to chart\n  topCountriesChart = svg;\n  return svg;\n}\n\n/**\n * Update the time series chart with data\n * @param {Object} chart The chart reference\n * @param {Array} data Filtered data array\n * @param {Object} dateRange Object with minDate and maxDate\n * @param {Object} options Chart options\n */\nfunction updateTimeSeriesChart(chart, data, dateRange) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n    yearly: false\n  };\n  // Group data by month or year based on options\n  var timeFormat = options.yearly ? '%Y' : '%Y-%m';\n  var displayFormat = options.yearly ? '%Y' : '%b %Y';\n  var timeData = d3.nest().key(function (d) {\n    var date = d.parsedDate;\n    return date ? d3.timeFormat(timeFormat)(date) : 'Unknown';\n  }).rollup(function (v) {\n    return v.length;\n  }).entries(data).filter(function (d) {\n    return d.key !== 'Unknown';\n  }).sort(function (a, b) {\n    return d3.ascending(a.key, b.key);\n  });\n  if (timeData.length === 0) {\n    // Clear the chart if no data\n    chart.selectAll('.line-path, .data-point, .hover-area, .annotation, .grid-lines line').remove();\n\n    // Show 'No data' message\n    if (chart.select('.no-data-message').empty()) {\n      chart.append('text').attr('class', 'no-data-message').attr('x', chart.node().getBBox().width / 2).attr('y', chart.node().getBBox().height / 2).attr('text-anchor', 'middle').style('font-size', '14px').style('fill', '#666').text('No data available for the selected filters');\n    }\n    return;\n  } else {\n    // Remove 'No data' message if it exists\n    chart.select('.no-data-message').remove();\n  }\n\n  // Convert string dates back to Date objects for the chart\n  timeData.forEach(function (d) {\n    if (options.yearly) {\n      // For yearly view, set to January 1st of the year\n      d.date = d3.timeParse('%Y')(d.key);\n    } else {\n      // For monthly view, set to the 1st of the month\n      d.date = d3.timeParse('%Y-%m')(d.key);\n    }\n  });\n\n  // Set up dimensions and margins\n  var margin = {\n    top: 20,\n    right: 30,\n    bottom: 60,\n    left: 60\n  };\n  var containerWidth = document.getElementById('time-series-chart').clientWidth || 500;\n  var width = Math.max(containerWidth - margin.left - margin.right, 100);\n  var height = 260 - margin.top - margin.bottom;\n\n  // Set scales\n  var dateExtent = d3.extent(timeData, function (d) {\n    return d.date;\n  });\n  var minDate = dateExtent[0];\n  var maxDate = dateExtent[1];\n\n  // Add 10% padding to the right side only\n  var timeRange = maxDate - minDate;\n  var paddedMaxDate = new Date(maxDate.getTime() + timeRange * 0.2);\n  var x = d3.scaleTime().domain([minDate, paddedMaxDate]).range([0, width]).nice();\n  var y = d3.scaleLinear().domain([0, d3.max(timeData, function (d) {\n    return d.value;\n  }) * 1.1]).range([height, 0]).nice();\n\n  // Update axes\n  chart.select('.x-axis').transition().duration(500).call(d3.axisBottom(x).ticks(options.yearly ? timeData.length : Math.min(timeData.length, 12)).tickFormat(d3.timeFormat(displayFormat))).selectAll('text').style('text-anchor', 'end').attr('dx', '-.8em').attr('dy', '.15em').attr('transform', 'rotate(-45)');\n  chart.select('.y-axis').transition().duration(500).call(d3.axisLeft(y).ticks(5));\n\n  // Update grid lines\n  var gridLines = chart.select('.grid-lines').selectAll('line.horizontal').data(y.ticks(5));\n  gridLines.exit().remove();\n  gridLines.enter().append('line').attr('class', 'horizontal').merge(gridLines).attr('x1', 0).attr('x2', width).attr('y1', function (d) {\n    return y(d);\n  }).attr('y2', function (d) {\n    return y(d);\n  });\n\n  // Remove existing elements\n  chart.selectAll('.line-path, .area-path, .data-point, .hover-area, .annotation').remove();\n\n  // Add area underneath the line\n  var area = d3.area().x(function (d) {\n    return x(d.date);\n  }).y0(height).y1(function (d) {\n    return y(d.value);\n  }).curve(d3.curveMonotoneX);\n  chart.append('path').datum(timeData).attr('class', 'area-path').attr('fill', 'rgba(54, 148, 209, 0.1)').attr('d', area);\n\n  // Create line\n  var line = d3.line().x(function (d) {\n    return x(d.date);\n  }).y(function (d) {\n    return y(d.value);\n  }).curve(d3.curveMonotoneX);\n\n  // Add line with animation\n  var path = chart.append('path').datum(timeData).attr('class', 'line-path').attr('fill', 'none').attr('stroke', '#3694d1').attr('stroke-width', 3).attr('d', line);\n\n  // Animate the line\n  var pathLength = path.node().getTotalLength();\n  path.attr('stroke-dasharray', pathLength + ' ' + pathLength).attr('stroke-dashoffset', pathLength).transition().duration(1000).ease(d3.easeLinear).attr('stroke-dashoffset', 0);\n\n  // Add data points with animation\n  chart.selectAll('.data-point').data(timeData).enter().append('circle').attr('class', 'data-point').attr('cx', function (d) {\n    return x(d.date);\n  }).attr('cy', function (d) {\n    return y(d.value);\n  }).attr('r', 0).attr('fill', '#e5007d').transition().delay(function (d, i) {\n    return i * 50;\n  }).duration(500).attr('r', 3);\n\n  // Add hover area with improved tooltips\n  chart.append('g').attr('class', 'hover-area').selectAll('rect').data(timeData).enter().append('rect').attr('x', function (d) {\n    return x(d.date) - width / (2 * timeData.length);\n  }).attr('y', 0).attr('width', width / timeData.length).attr('height', height).attr('fill', 'transparent').on('mouseover', function (d) {\n    // Highlight the point\n    d3.select(this.parentNode.parentNode).selectAll('.data-point').filter(function (point) {\n      return point.key === d.key;\n    }).transition().duration(100).attr('r', 7).attr('fill', '#ff4081');\n    var tooltip = d3.select('#time-series-chart').append('div').attr('class', 'chart-tooltip').style('position', 'absolute').style('left', '10px') // Fixed position on the left\n    .style('top', '10px') // Fixed position at the top\n    .style('z-index', '1000').style('background-color', 'rgba(255, 255, 255, 0.9)').style('border', '1px solid #ddd').style('padding', '8px').style('border-radius', '4px');\n    var formatDate = options.yearly ? '%Y' : '%B %Y';\n    tooltip.html(\"\\n                <div class=\\\"chart-tooltip-title\\\">\".concat(d3.timeFormat(formatDate)(d.date), \"</div>\\n                <div><span class=\\\"chart-tooltip-value\\\">\").concat(d.value, \"</span> articles</div>\\n                <div>\").concat(Math.round(d.value / data.length * 100), \"% of selected data</div>\\n            \"));\n  }).on('mouseout', function () {\n    // Restore point style\n    d3.select(this.parentNode.parentNode).selectAll('.data-point').transition().duration(100).attr('r', 5).attr('fill', '#e5007d');\n    d3.selectAll('.chart-tooltip').remove();\n  });\n\n  // Add annotation for max value\n  var maxPoint = timeData.reduce(function (max, current) {\n    return current.value > max.value ? current : max;\n  }, timeData[0]);\n  chart.append('circle').attr('class', 'annotation').attr('cx', x(maxPoint.date)).attr('cy', y(maxPoint.value)).attr('r', 7).attr('fill', 'none').attr('stroke', '#e5007d').attr('stroke-width', 2).attr('opacity', 0).transition().delay(1200).duration(300).attr('opacity', 1);\n  chart.append('text').attr('class', 'annotation').attr('x', x(maxPoint.date)).attr('y', y(maxPoint.value) - 15).attr('text-anchor', 'middle').attr('font-size', '12px').attr('fill', '#e5007d').text(\"Peak: \".concat(maxPoint.value)).attr('opacity', 0).transition().delay(1200).duration(300).attr('opacity', 1);\n}\n\n/**\n * Update the category breakdown chart with data\n * @param {Object} chart The chart reference\n * @param {Array} data Filtered data array\n * @param {Object} options Chart options\n */\nfunction updateCategoryChart(chart, data) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    showHealthCategories: false\n  };\n  console.log(\"Updating category chart with \".concat(data.length, \" data points\"));\n\n  // Determine which category type to show based on options\n  var categoryType = options.showHealthCategories ? 'Sector Categories' : 'Corruption Categories';\n\n  // Update chart title to reflect current view\n  d3.select('#category-breakdown-card .card-header h3').text(options.showHealthCategories ? 'Health Sector Categories' : 'Integrity Issues Categories');\n\n  // Flatten and count all selected categories\n  var categoryData = [];\n  var categoryCounts = {};\n  data.forEach(function (item) {\n    if (Array.isArray(item[categoryType])) {\n      item[categoryType].forEach(function (category) {\n        if (category && category.trim()) {\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\n        }\n      });\n    }\n  });\n\n  // Convert to array format for D3\n  Object.entries(categoryCounts).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      category = _ref2[0],\n      count = _ref2[1];\n    categoryData.push({\n      category: category,\n      count: count\n    });\n  });\n\n  // Sort by count descending\n  categoryData.sort(function (a, b) {\n    return b.count - a.count;\n  });\n\n  // Get top 10 categories (or all if fewer than 10)\n  var topCategories = categoryData.slice(0, 10);\n  if (topCategories.length === 0) {\n    // Clear the chart if no data\n    chart.selectAll('.category-bar, .count-label').remove();\n\n    // Show 'No data' message\n    if (chart.select('.no-data-message').empty()) {\n      chart.append('text').attr('class', 'no-data-message').attr('x', chart.node().getBBox().width / 2).attr('y', chart.node().getBBox().height / 2).attr('text-anchor', 'middle').style('font-size', '14px').style('fill', '#666').text('No data available for the selected filters');\n    }\n    return;\n  } else {\n    // Remove 'No data' message if it exists\n    chart.select('.no-data-message').remove();\n  }\n\n  // Set up dimensions and margins\n  var margin = {\n    top: 20,\n    right: 30,\n    bottom: 50,\n    left: 160\n  };\n  var containerWidth = document.getElementById('category-chart').clientWidth || 500;\n  var width = Math.max(containerWidth - margin.left - margin.right, 100);\n  var height = 260 - margin.top - margin.bottom;\n\n  // Set scales\n  var x = d3.scaleLinear().domain([0, d3.max(topCategories, function (d) {\n    return d.count;\n  }) * 1.35]).range([0, width]);\n  var y = d3.scaleBand().domain(topCategories.map(function (d) {\n    return d.category;\n  })).range([0, height]).padding(0.2);\n\n  // Update axes with transitions\n  chart.select('.x-axis').transition().duration(500).call(d3.axisBottom(x).ticks(5));\n  chart.select('.y-axis').transition().duration(500).call(d3.axisLeft(y)).selectAll('text').style('text-anchor', 'end');\n\n  // Set bar color based on category type\n  var barColor = options.showHealthCategories ? '#e5007d' : '#3694d1';\n\n  // Handle bars with enter/update/exit pattern\n  var bars = chart.selectAll('.category-bar').data(topCategories, function (d) {\n    return d.category;\n  });\n\n  // Remove bars that are no longer in the data\n  bars.exit().transition().duration(300).attr('width', 0).remove();\n\n  // Update existing bars\n  bars.transition().duration(500).attr('y', function (d) {\n    return y(d.category);\n  }).attr('height', y.bandwidth()).attr('width', function (d) {\n    return x(d.count);\n  }).attr('fill', barColor);\n\n  // Add new bars with animation\n  bars.enter().append('rect').attr('class', 'category-bar').attr('x', 0).attr('y', function (d) {\n    return y(d.category);\n  }).attr('height', y.bandwidth()).attr('width', 0).attr('fill', barColor).transition().duration(800).attr('width', function (d) {\n    return x(d.count);\n  });\n\n  // Handle interactive hover effects\n  chart.selectAll('.category-bar').on('mouseover', function (d) {\n    d3.select(this).transition().duration(100).attr('fill', options.showHealthCategories ? '#3694d1' : '#e5007d');\n    var tooltip = d3.select('#category-chart').append('div').attr('class', 'chart-tooltip').style('position', 'absolute').style('left', \"10px\").style('top', \"10px\");\n    tooltip.html(\"\\n                <div class=\\\"chart-tooltip-title\\\">\".concat(d.category, \"</div>\\n                <div><span class=\\\"chart-tooltip-value\\\">\").concat(d.count, \"</span> articles</div>\\n                <div>\").concat((d.count / data.length * 100).toFixed(1), \"% of selected data</div>\\n            \"));\n  }).on('mouseout', function () {\n    d3.select(this).transition().duration(100).attr('fill', barColor);\n    d3.selectAll('.chart-tooltip').remove();\n  });\n\n  // Update count labels\n  var labels = chart.selectAll('.count-label').data(topCategories, function (d) {\n    return d.category;\n  });\n\n  // Remove old labels\n  labels.exit().remove();\n\n  // Update existing labels\n  labels.transition().duration(500).attr('x', function (d) {\n    return x(d.count) + 5;\n  }).attr('y', function (d) {\n    return y(d.category) + y.bandwidth() / 2 + 5;\n  }).text(function (d) {\n    return d.count;\n  });\n\n  // Add new labels\n  labels.enter().append('text').attr('class', 'count-label').attr('x', function (d) {\n    return x(d.count) + 5;\n  }).attr('y', function (d) {\n    return y(d.category) + y.bandwidth() / 2 + 5;\n  }).text(function (d) {\n    return d.count;\n  }).attr('fill', '#333').attr('font-size', '12px').attr('opacity', 0).transition().duration(500).attr('opacity', 1);\n}\n\n/**\n * Update the top countries chart with data\n * @param {Object} chart The chart reference\n * @param {Array} data Filtered data array\n * @param {Object} options Chart options\n */\nfunction updateTopCountriesChart(chart, data) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    mapView: false\n  };\n  console.log(\"Updating top countries chart with \".concat(data.length, \" data points\"));\n\n  // If map view is selected, show the map chart instead of bars\n  if (options.mapView) {\n    updateCountryMapChart(chart, data);\n    return;\n  }\n\n  // Count articles by country\n  var countryData = [];\n  var countryCounts = {};\n  data.forEach(function (item) {\n    if (item.country && item.country.trim()) {\n      countryCounts[item.country] = (countryCounts[item.country] || 0) + 1;\n    }\n  });\n\n  // Convert to array format for D3\n  Object.entries(countryCounts).forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      country = _ref4[0],\n      count = _ref4[1];\n    countryData.push({\n      country: country,\n      count: count\n    });\n  });\n\n  // Sort by count descending and limit to top 10\n  countryData.sort(function (a, b) {\n    return b.count - a.count;\n  });\n  var topCountries = countryData.slice(0, 10);\n  if (topCountries.length === 0) {\n    // Clear the chart if no data\n    chart.selectAll('.country-bar, .count-label').remove();\n\n    // Show 'No data' message\n    if (chart.select('.no-data-message').empty()) {\n      chart.append('text').attr('class', 'no-data-message').attr('x', chart.node().getBBox().width / 2).attr('y', chart.node().getBBox().height / 2).attr('text-anchor', 'middle').style('font-size', '14px').style('fill', '#666').text('No data available for the selected filters');\n    }\n    return;\n  } else {\n    // Remove 'No data' message if it exists\n    chart.select('.no-data-message').remove();\n  }\n\n  // Set up dimensions and margins\n  var margin = {\n    top: 20,\n    right: 30,\n    bottom: 50,\n    left: 110\n  };\n  var containerWidth = document.getElementById('top-countries-chart').clientWidth || 500;\n  var width = Math.max(containerWidth - margin.left - margin.right, 100);\n  var height = 260 - margin.top - margin.bottom;\n\n  // Set scales\n  var x = d3.scaleLinear().domain([0, d3.max(topCountries, function (d) {\n    return d.count;\n  }) * 1.35]).range([0, width]);\n  var y = d3.scaleBand().domain(topCountries.map(function (d) {\n    return d.country;\n  })).range([0, height]).padding(0.2);\n\n  // Update axes with transitions\n  chart.select('.x-axis').transition().duration(500).call(d3.axisBottom(x).ticks(5));\n  chart.select('.y-axis').transition().duration(500).call(d3.axisLeft(y)).selectAll('text').style('text-anchor', 'end');\n\n  // Handle bars with enter/update/exit pattern\n  var bars = chart.selectAll('.country-bar').data(topCountries, function (d) {\n    return d.country;\n  });\n\n  // Remove bars that are no longer in the data\n  bars.exit().transition().duration(300).attr('width', 0).remove();\n\n  // Update existing bars\n  bars.transition().duration(500).attr('y', function (d) {\n    return y(d.country);\n  }).attr('height', y.bandwidth()).attr('width', function (d) {\n    return x(d.count);\n  }).attr('fill', '#e5007d');\n\n  // Add new bars with animation\n  bars.enter().append('rect').attr('class', 'country-bar').attr('x', 0).attr('y', function (d) {\n    return y(d.country);\n  }).attr('height', y.bandwidth()).attr('width', 0).attr('fill', '#e5007d').transition().duration(800).attr('width', function (d) {\n    return x(d.count);\n  });\n\n  // Handle interactive hover effects\n  chart.selectAll('.country-bar').on('mouseover', function (d) {\n    d3.select(this).transition().duration(100).attr('fill', '#3694d1');\n    var tooltip = d3.select('#top-countries-chart').append('div').attr('class', 'chart-tooltip').style('position', 'absolute').style('left', \"10px\").style('top', \"10px\");\n    tooltip.html(\"\\n                <div class=\\\"chart-tooltip-title\\\">\".concat(d.country, \"</div>\\n                <div><span class=\\\"chart-tooltip-value\\\">\").concat(d.count, \"</span> articles</div>\\n                <div>\").concat((d.count / data.length * 100).toFixed(1), \"% of selected data</div>\\n            \"));\n  }).on('mouseout', function () {\n    d3.select(this).transition().duration(100).attr('fill', '#e5007d');\n    d3.selectAll('.chart-tooltip').remove();\n  });\n\n  // Update count labels\n  var labels = chart.selectAll('.count-label').data(topCountries, function (d) {\n    return d.country;\n  });\n\n  // Remove old labels\n  labels.exit().remove();\n\n  // Update existing labels\n  labels.transition().duration(500).attr('x', function (d) {\n    return x(d.count) + 5;\n  }).attr('y', function (d) {\n    return y(d.country) + y.bandwidth() / 2 + 5;\n  }).text(function (d) {\n    return d.count;\n  });\n\n  // Add new labels\n  labels.enter().append('text').attr('class', 'count-label').attr('x', function (d) {\n    return x(d.count) + 5;\n  }).attr('y', function (d) {\n    return y(d.country) + y.bandwidth() / 2 + 5;\n  }).text(function (d) {\n    return d.count;\n  }).attr('fill', '#333').attr('font-size', '12px').attr('opacity', 0).transition().duration(500).attr('opacity', 1);\n}\nvar _default = exports.default = {\n  initializeTimeSeriesChart: initializeTimeSeriesChart,\n  initializeCategoryChart: initializeCategoryChart,\n  initializeTopCountriesChart: initializeTopCountriesChart,\n  updateTimeSeriesChart: updateTimeSeriesChart,\n  updateCategoryChart: updateCategoryChart,\n  updateTopCountriesChart: updateTopCountriesChart\n};"},"sourceMaps":null,"error":null,"hash":"aad36ea902591e9fc0f7ba2f83d49658","cacheData":{"env":{}}}