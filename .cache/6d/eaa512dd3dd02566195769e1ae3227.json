{"id":"js/components/ui.js","dependencies":[{"name":"C:\\Users\\Tom\\PycharmProjects\\health_atlas\\atlas_clean\\package.json","includedInParent":true,"mtime":1741188834651}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initializeUI = initializeUI;\n/**\n * UI module\n * Handles UI interactions not directly related to the map or filters\n */\n\n/**\n * Initialize UI components\n */\nfunction initializeUI() {\n  setupViewToggle();\n  setupFilterToggle();\n  setupInfoCard();\n  setupShareButtons();\n  setupExportButton();\n  setupHelpButton();\n}\n\n/**\n * Setup view toggle (Map/List)\n */\nfunction setupViewToggle() {\n  var buttons = document.querySelectorAll('.switch-button');\n  var mapOverviewBtn = document.getElementById('map-overview-btn');\n  var listBtn = document.getElementById('list-btn');\n  var mapElement = document.getElementById('map');\n  var dataTables = document.getElementById('mask');\n  function updateVisibility() {\n    if (mapOverviewBtn.classList.contains('active')) {\n      mapElement.style.display = 'block';\n      dataTables.style.display = 'none';\n    } else {\n      mapElement.style.display = 'none';\n      dataTables.style.display = 'block';\n    }\n  }\n  buttons.forEach(function (button) {\n    button.addEventListener('click', function () {\n      buttons.forEach(function (btn) {\n        return btn.classList.remove('active');\n      });\n      button.classList.add('active');\n      updateVisibility();\n    });\n  });\n\n  // Initial visibility setup\n  updateVisibility();\n}\n\n/**\n * Setup filter toggle\n */\nfunction setupFilterToggle() {\n  document.querySelector('#clicker').addEventListener('click', function () {\n    var content = document.querySelector('.filter-content');\n    var icon = document.querySelector('.expand-icon');\n    content.classList.toggle('expanded');\n    icon.classList.toggle('expanded');\n  });\n}\n\n/**\n * Setup info card overlay\n */\nfunction setupInfoCard() {\n  var overlay = document.getElementById('infoCardOverlay');\n\n  // Show info card on first visit\n  if (!sessionStorage.getItem('hasVisitedBefore')) {\n    setTimeout(function () {\n      overlay.classList.add('show');\n    }, 100);\n  }\n\n  // Close button functionality\n  document.getElementById('closeInfoCard').addEventListener('click', function () {\n    overlay.classList.remove('show');\n    sessionStorage.setItem('hasVisitedBefore', 'true');\n  });\n\n  // Close when clicking overlay background\n  overlay.addEventListener('click', function (e) {\n    if (e.target === this) {\n      this.classList.remove('show');\n    }\n  });\n}\n\n/**\n * Setup social share buttons\n */\nfunction setupShareButtons() {\n  // Twitter share\n  function shareOnTwitter() {\n    var thisPage = window.location.href.split('?')[0];\n    var shareText = 'Explore global health sector integrity issues and scandals: ' + thisPage;\n    var shareURL = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(shareText);\n    window.open(shareURL, '_blank');\n  }\n\n  // Facebook share\n  function shareOnFacebook() {\n    var thisPage = window.location.href.split('?')[0];\n    var toShareUrl = 'https://ti-health.org/';\n    var shareURL = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(toShareUrl);\n    window.open(shareURL, '_blank', 'toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250,top=300,left=300');\n  }\n  var twitterButton = document.getElementById('twitter_share');\n  if (twitterButton) {\n    twitterButton.addEventListener('click', shareOnTwitter);\n  }\n  var facebookButton = document.getElementById('lin_share');\n  if (facebookButton) {\n    facebookButton.addEventListener('click', shareOnFacebook);\n  }\n}\n\n/**\n * Setup export button for CSV download\n */\nfunction setupExportButton() {\n  var exportButton = $('<button>').addClass('btn btn-sm btn-outline-secondary export-csv-button btn-sharer').html('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-box-arrow-down\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1z\"/><path fill-rule=\"evenodd\" d=\"M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708z\"/></svg>').attr('title', 'Export filtered data to CSV').appendTo('#export-button-container').on('click', function () {\n    // This function needs to access the app state to get filtered data\n    // In the actual implementation, we'll use a proper state management approach\n    if (window.appState && window.appState.filteredData) {\n      exportToCsv(window.appState.filteredData);\n    }\n  });\n}\n\n/**\n * Export data to CSV file\n * @param {Array} dataToExport - Data to export\n */\nfunction exportToCsv(dataToExport) {\n  var csv = [];\n  var headers = ['Title', 'Country/Region', 'URL', 'Date'];\n  csv.push(headers.join(','));\n  dataToExport.forEach(function (row) {\n    var csvRow = ['\"' + (row.Title || '').replace(/\"/g, '\"\"') + '\"', '\"' + (row.country || '').replace(/\"/g, '\"\"') + '\"', '\"' + (row.url || '').replace(/\"/g, '\"\"') + '\"', '\"' + (row['Date'] || '').replace(/\"/g, '\"\"') + '\"'];\n    csv.push(csvRow.join(','));\n  });\n  var csvContent = csv.join('\\n');\n  var blob = new Blob([csvContent], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  var link = document.createElement(\"a\");\n  if (link.download !== undefined) {\n    var url = URL.createObjectURL(blob);\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", \"export.csv\");\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n}\n\n/**\n * Setup help button\n */\nfunction setupHelpButton() {\n  var helpButton = $('<button>').addClass('btn btn-sm btn-outline-secondary export-csv-button btn-sharer').html('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 512 512\"><path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z\"/></svg>').attr('title', 'Open the Quick start menu').appendTo('#help-button-container').css({\n    'min-height': '34px',\n    'display': 'flex',\n    'align-items': 'center',\n    'justify-content': 'center'\n  }).on('click', function () {\n    $('#infoCardOverlay').addClass('show');\n  });\n}"},"sourceMaps":null,"error":null,"hash":"0b466147cda273bd11032de2ee7c5221","cacheData":{"env":{}}}